{% extends 'associationbase.html' %}
{% load static %}

{% block title %}
    Ledger
{% endblock title %}

{% block body %}
<form action="" method="post">
    {% csrf_token %}
    <select name="month" id="month">
        {% for num, month in months.items %}
        <option value="{{num}}">{{month}}</option>
        {% endfor %}
    </select>
    <select name="year" id="year">
    </select>
    <input type="submit" value="get" name="submit">
</form>

{% if month_payments %}

    {% for payment in month_payments %}
    <div class="payment">
        <p>{{ payment.payment_desc}} </p>
        <p>{{ payment.user | title }} paid {{ payment.amount }} through {{ payment.payment_mode }}. </p>
        <p>UTR: {{ payment.UTR }} </p>
        <p> {{ payment.payment_date}} </p>
    </div>
    {% endfor %}

{% else %}

<h1>All Payments</h1>

<div class="payments">
    {% for payment in payments %}
    <div class="payment">
        <p>{{ payment.payment_desc}} </p>
        <p>{{ payment.user | title }} paid {{ payment.amount }} through {{ payment.payment_mode }}. </p>
        <p>UTR: {{ payment.UTR }} </p>
        <p> {{ payment.payment_date}} </p>
    </div>
    {% endfor %}
</div>
{% endif %}
    
    <script>
        const years = document.querySelector("#year");
        for(let i = 2010; i < 2040; i++){
        const option = document.createElement("option");
        option.setAttribute("value", i);
        option.appendChild(document.createTextNode(i));
        years.appendChild(option);
    }
</script>
{% endblock body %}